<%- include('partials/header.ejs'); -%>

    <ul>
        <% if(messages.success_msg) { %>
        <li><%= messages.success_msg %></li>
        <% } %>
      </ul>

      <ul>
        <% if(typeof errors != 'undefined') { %>
             <% errors.forEach(error => { %>
                <li><%= error.message %></li>
           <%   }); %>
        
        <% } %>
      </ul>
      

    <div class="container">
        <div class="forms-container">
            <div class="signin-signup">
                
                <!-- Sign in form / Login-->
                <form action="/users/login" class="sign-in-form">
                    <h2 class="title">Sign in</h2>
                    <div class="input-field">
                        <i class="bi bi-person"></i>
                        <input type="email" placeholder="Email" id="email" name="email" required>
                    </div>
                    <div class="input-field">
                        <i class="bi bi-lock"></i>
                        <input type="password" placeholder="password" id="password" name="password" required>
                    </div>
                    <input type="submit" value="Login" class="btn solid">
                    
                    <p class="social-text">Or Sign in with google</p>
                    <div class="social-media">
                        <a href="#" class="social-icon">
                            <i class="bi bi-google"></i>
                        </a>
                    </div>
                    <a href="/users/register">register here</a>
                </form>
                     
                        <%#Business Register form %>
                <form action="/users/register" class="sign-up-business-form" method="post">
                    <h2 class="title">Sign up</h2>
                    <div class="input-field">
                        <i class="bi bi-person"></i>
                        <input type="text" placeholder="First Name" id="first_name" name="first_name" required>
                    </div>
                    <div class="input-field">
                        <i class="bi bi-person"></i>
                        <input type="text" placeholder="Last Name" id="last_name" name="last_name" required>
                    </div>
                    <div class="input-field">
                        <i class="bi bi-envelope"></i>
                        <input type="email" placeholder="Email" id="email" name="email" required >
                    </div>
                    <div class="input-field">
                        <i class="bi bi-telephone"></i>
                        <input type="tel" placeholder="Phone Number" id="phone_number" name="phone_number" required>
                    </div>
                    <div class="input-field">
                        <i class="bi bi-lock"></i>
                        <input type="password" placeholder="password" id="password" name="password" required>
                    </div>
                    <div class="input-field">
                        <i class="bi bi-lock-fill"></i>
                        <input type="password" placeholder="Confirm password" id="password2" name="password2" required>
                    </div>
                    <input type="submit" value="Sign up" class="btn solid">
                    
                    <p class="social-text">Or Sign up with google</p>
                    <div class="social-media">
                        <a href="#" class="social-icon">
                            <i class="bi bi-google"></i>
                        </a>
                    </div>
                    
                </form>

            </div>
        </div>

        <div class="panels-container">
           <div class="panel left-panel">
            <div class="content">
                <h3>New to BookMyExpert?</h3>
                <p>Join our community of experts and clients</p>
                <div class="sign-up-btns">
                <button class="btn transparent" id="sign-up-business-btn">Sign up Business Account</button>
                </div>
            </div>

           </div>

           <div class="panel right-panel">
            <div class="content">
                <p>Connect with experts from various fields</p>
                <h3>Karibu to BookMyExpert!</h3>
                <button class="btn transparent" id="sign-in-btn">Sign in</button>
            </div>

           </div>
        </div>
    </div>

    <script> //same script as the landing page.
        document.addEventListener("DOMContentLoaded", function () {
             const sign_in_btn = document.querySelector("#sign-in-btn");
             const sign_up_personal_btn = document.querySelector("#sign-up-personal-btn"); 
             const sign_up_business_btn = document.querySelector("#sign-up-business-btn");
             const container = document.querySelector(".container");
     
             // Detect URL path and apply the corresponding class
             if (window.location.pathname === "/business/register") {
                 container.classList.add("sign-up-personal-mode");
                 console.log("URL detected: /users/register -> Added class: sign-up-personal-mode");
             } else if (window.location.pathname === "/users/register") {
                 container.classList.add("sign-up-business-mode");
                 console.log("URL detected: /business/register -> Added class: sign-up-business-mode");
             }
     
             // Event listeners for button clicks
             sign_up_business_btn.addEventListener("click", () => {
                 container.classList.add("sign-up-business-mode");
                 container.classList.remove("sign-up-mode");
                 console.log("Clicked: Sign up for business");
                 window.history.pushState({}, "", "/business/register"); // Change URL without reloading
             });
     
             sign_in_btn.addEventListener("click", () => {
                 container.classList.remove("sign-up-mode", "sign-up-business-mode");
                 console.log("Clicked: Sign in");
                 window.history.pushState({}, "", "/login"); // Change URL
             });
     
             
         });
     
     </script>
     </body>
     </html>